---
phase: 02-workflow-observability-baseline
plan: 02
type: execute
wave: 2
depends_on:
  - "02-01"
files_modified:
  - projects/web_api/web_api/main.py
  - projects/web_api/web_api/models/responses.py
  - projects/web_api/web_api/queue_monitor.py
  - projects/frontend/src/components/Dashboard/StatsOverview.jsx
  - projects/frontend/src/components/Help/HelpPage.jsx
  - projects/web_api/tests/test_workflow_observability.py
  - docs/troubleshooting.md
files-modified: [projects/web_api/web_api/main.py, projects/web_api/web_api/models/responses.py, projects/web_api/web_api/queue_monitor.py, projects/frontend/src/components/Dashboard/StatsOverview.jsx, projects/frontend/src/components/Help/HelpPage.jsx, projects/web_api/tests/test_workflow_observability.py, docs/troubleshooting.md]
autonomous: true
objective: "Build and validate operator dashboards plus sustained operational alert routing for queue/workflow/service-health signals."
requirements:
  - OBS-02
  - OBS-03
user_setup: []
must_haves:
  truths:
    - "Dashboard views expose queue backlog, workflow failure, and service-health signals with explicit severity thresholds"
    - "Sustained backlog and failure conditions emit actionable operational alerts through existing alerting infrastructure"
  artifacts:
    - path: "projects/web_api/web_api/main.py"
      provides: "health-matrix/threshold summary endpoints and sustained alert evaluation loop"
      min_lines: 80
    - path: "projects/frontend/src/components/Dashboard/StatsOverview.jsx"
      provides: "operator-focused dashboard rendering of observability signals"
    - path: "projects/web_api/tests/test_workflow_observability.py"
      provides: "alert gating and observability endpoint regression tests"
  key_links:
    - from: "projects/web_api/web_api/main.py"
      to: "projects/frontend/src/components/Dashboard/StatsOverview.jsx"
      via: "dashboard API consumption for health/backlog/failure cards"
    - from: "projects/web_api/web_api/main.py"
      to: "projects/alerting/alerting/main.py"
      via: "ALERTING_NEW_ALERT_TOPIC events for sustained operational alerts"
---

<objective>
Build and validate operator dashboards plus sustained operational alert routing for queue/workflow/service-health signals.

Purpose: close Phase 2 by turning observability data into routine operational decisions and proactive incident notifications.
Output: dashboard enhancements, service/queue/workflow threshold surfaces, and alert routing for sustained issues.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/02-workflow-observability-baseline/02-RESEARCH.md
@.planning/phases/02-workflow-observability-baseline/02-01-SUMMARY.md
@projects/web_api/web_api/main.py
@projects/web_api/web_api/models/responses.py
@projects/web_api/web_api/queue_monitor.py
@projects/frontend/src/components/Dashboard/StatsOverview.jsx
@projects/alerting/alerting/main.py
</context>

<tasks>

## Task 1
<task type="auto">
  <name>Task 1: Add service-health and thresholded observability summaries in web_api</name>
  <files>projects/web_api/web_api/main.py, projects/web_api/web_api/models/responses.py, projects/web_api/web_api/queue_monitor.py</files>
  <action>Create endpoint(s) that aggregate service readiness, queue backlog severity, and workflow failure pressure into dashboard-ready summaries. Use configurable thresholds/cooldowns from environment variables and keep payloads stable for frontend polling.</action>
  <verify>cd projects/web_api && uv run pytest tests/test_workflow_observability.py -q</verify>
  <done>API exposes actionable, threshold-aware observability summaries for routine operations</done>
</task>

## Task 2
<task type="auto">
  <name>Task 2: Upgrade dashboard and help surfaces for operator triage</name>
  <files>projects/frontend/src/components/Dashboard/StatsOverview.jsx, projects/frontend/src/components/Help/HelpPage.jsx, docs/troubleshooting.md</files>
  <action>Render backlog/failure/service-health signals with clear severity states, last-update context, and direct triage links (dashboard/help/docs). Preserve existing polling behavior while adding explicit states for degraded/unhealthy conditions.</action>
  <verify>cd projects/frontend && npm run build</verify>
  <done>Operators can detect and navigate queue, workflow, and service-health issues without leaving the routine dashboard/help flow</done>
</task>

## Task 3
<task type="auto">
  <name>Task 3: Implement sustained-condition operational alerts and regression tests</name>
  <files>projects/web_api/web_api/main.py, projects/web_api/tests/test_workflow_observability.py</files>
  <action>Add a sustained-condition evaluator that publishes `Alert` events to `ALERTING_NEW_ALERT_TOPIC` only after threshold duration and cooldown checks pass. Include tests for trigger, dedupe/cooldown, and recovery-reset behavior so noisy transient spikes do not flood operators.</action>
  <verify>cd projects/web_api && uv run pytest tests/test_workflow_observability.py -q</verify>
  <done>Sustained backlog/failure/service-health issues trigger actionable alerts with deterministic anti-spam behavior</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd projects/web_api && uv run pytest tests/test_workflow_observability.py -q` passes
- [ ] `cd projects/frontend && npm run build` succeeds
- [ ] Dashboard shows queue/workflow/service-health severity states from new summary endpoint(s)
- [ ] Sustained condition alerts publish once per cooldown window and reset after recovery
</verification>

<success_criteria>

- Queue backlog, workflow failures, and service-health signals are visible with routine-ops granularity
- Sustained operational issues trigger alert events with actionable context and controlled frequency
- Observability APIs and alert logic are regression-tested and safe for continuous polling

</success_criteria>

<output>
After completion, create `.planning/phases/02-workflow-observability-baseline/02-02-SUMMARY.md`
</output>
