---
phase: 06-extension-contracts-performance
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/file_enrichment_modules.md
  - libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md
  - tools/tests/test_extension_contract_docs.sh
files-modified: [docs/file_enrichment_modules.md, libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md, tools/tests/test_extension_contract_docs.sh]
autonomous: true
objective: "Define a canonical enrichment-module extension contract and verification checklist so new module onboarding is deterministic and test-backed."
requirements:
  - EXT-01
user_setup: []
must_haves:
  truths:
    - "Extension onboarding docs expose one canonical contract checklist covering required module protocol fields, workflow registration expectations, and verification commands."
    - "Extension contract drift is automatically detectable via a deterministic docs check command that fails when required checklist content is missing."
  artifacts:
    - path: "docs/file_enrichment_modules.md"
      provides: "operator-facing extension contract template and onboarding checklist"
      min_lines: 140
    - path: "libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md"
      provides: "deep implementation checklist aligned with runtime protocol expectations"
      min_lines: 550
    - path: "tools/tests/test_extension_contract_docs.sh"
      provides: "deterministic extension contract docs gate"
      min_lines: 40
  key_links:
    - from: "docs/file_enrichment_modules.md"
      to: "libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md"
      via: "high-level checklist references the detailed protocol and test harness guidance"
    - from: "libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md"
      to: "projects/file_enrichment/file_enrichment/workflow.py"
      via: "checklist reflects workflow filter/dependency semantics used by runtime module loading"
    - from: "tools/tests/test_extension_contract_docs.sh"
      to: "docs/file_enrichment_modules.md"
      via: "script enforces required contract checklist language"
---

<objective>
Define a canonical enrichment-module extension contract and verification checklist so new module onboarding is deterministic and test-backed.

Purpose: satisfy EXT-01 by eliminating onboarding ambiguity for new enrichment modules.
Output: aligned onboarding docs plus deterministic contract-drift gate.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/06-extension-contracts-performance/06-RESEARCH.md
@docs/file_enrichment_modules.md
@libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md
@projects/file_enrichment/file_enrichment/workflow.py
@projects/file_enrichment/file_enrichment/routes/enrichments.py
@libs/file_enrichment_modules/tests/harness/harness.py
</context>

<tasks>

## Task 1
<task type="auto">
  <name>Task 1: Add canonical extension contract checklist in file_enrichment_modules docs</name>
  <files>docs/file_enrichment_modules.md</files>
  <action>Add a concise, copy/paste onboarding contract template that explicitly requires `create_enrichment_module()`, `should_process()`, `process()`, `name`, `dependencies`, and `workflows` expectations, plus a required verification command block.</action>
  <verify>rg -n "create_enrichment_module|should_process|process|dependencies|workflows|Verification Checklist" docs/file_enrichment_modules.md</verify>
  <done>Top-level module onboarding doc contains one explicit contract checklist for implementers.</done>
</task>

## Task 2
<task type="auto">
  <name>Task 2: Align detailed development guide with runtime contract and harness verification</name>
  <files>libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md</files>
  <action>Add an explicit contract compliance section that maps checklist items to runtime loading behavior and test harness usage, including required pass criteria for standalone module tests.</action>
  <verify>rg -n "Contract Compliance|workflows = \[\"default\"\]|test_harness|test_harness_integration|should_process\(\)" libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md</verify>
  <done>Detailed guide unambiguously explains how checklist items map to runtime behavior and test verification.</done>
</task>

## Task 3
<task type="auto">
  <name>Task 3: Add deterministic extension-contract docs gate</name>
  <files>tools/tests/test_extension_contract_docs.sh</files>
  <action>Create a shell gate that fails when required extension contract checklist terms are missing from onboarding docs and deep guide, and include this command in plan verification.</action>
  <verify>bash tools/tests/test_extension_contract_docs.sh</verify>
  <done>Contract checklist drift is detectable in CI/local automation via a single deterministic command.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `bash tools/tests/test_extension_contract_docs.sh` passes
- [ ] `cd libs/file_enrichment_modules && uv run pytest tests/test_harness_integration.py -q` passes
- [ ] `rg -n "create_enrichment_module|should_process|process|workflows|Verification Checklist" docs/file_enrichment_modules.md libs/file_enrichment_modules/DEVELOPMENT_GUIDE.md` shows required contract language
- [ ] EXT-01 evidence recorded: extension onboarding contract and verification checklist are deterministic and test-backed
</verification>

<success_criteria>

- EXT-01 is satisfied with canonical extension onboarding contract/checklist coverage
- New module onboarding protocol is consistent across high-level and deep technical docs
- Contract-drift detection is automated and reproducible

</success_criteria>

<output>
After completion, create `.planning/phases/06-extension-contracts-performance/06-01-SUMMARY.md`
</output>
